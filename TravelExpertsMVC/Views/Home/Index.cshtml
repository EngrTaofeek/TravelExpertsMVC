@{
    ViewData["Title"] = "Home Page";
}
@{
    var packages = ViewBag.Packages as IEnumerable<dynamic>; // Cast ViewBag.Packages to an enumerable
}

<h1 class="text-center mb-1 fw-bold">
    Exploring the World, One Trip at a Time.with Travel Experts
</h1>
<div class="slideshow-container">
    <div class="mySlides fade">
        <div class="numbertext">1 / 7</div>
        <img src="images/destination.jpg" />
        <div class="text">
            Escape to the stunning beaches of Nice, France. Relax under the sun, enjoy crystal-clear waters, and indulge in breathtaking Mediterranean views. Book your dream vacation today!
        </div>
    </div>

    <div class="mySlides fade">
        <div class="numbertext">2 / 7</div>
        <img src="images/mountains.jpg" />
        <div class="text">
            Discover the thrill of adventure in majestic mountain landscapes. Hike, climb, or simply soak in the beauty of nature. Your mountain getaway awaits!
        </div>
    </div>

    <div class="mySlides fade">
        <div class="numbertext">3 / 7</div>
        <img src="images/eiffel-tower.jpg" />
        <div class="text">
            Experience the magic of Paris, the city of love. Visit the iconic Eiffel Tower, stroll through charming streets, and immerse yourself in Parisian culture. Make your romantic escape unforgettable!
        </div>
    </div>

    <div class="mySlides fade">
        <div class="numbertext">4 / 7</div>
        <img src="images/cairo.jpg" />
        <div class="text">
            Journey to Cairo, the gateway to ancient Egypt. Explore the majestic pyramids of Giza and delve into the mysteries of one of the world's oldest civilizations. Adventure awaits!
        </div>
    </div>

    <div class="mySlides fade">
        <div class="numbertext">5 / 7</div>
        <img src="images/banff.jpg" />
        <div class="text">
            Unwind by the serene Banff Lake, nestled in the heart of the Canadian Rockies. Whether it's hiking, kayaking, or simply relaxing, Banff offers the perfect escape.
        </div>
    </div>

    <div class="mySlides fade">
        <div class="numbertext">6 / 7</div>
        <img src="images/amsterdam.jpg" />
        <div class="text">
            Discover the charm of Amsterdam! Cruise along historic canals, marvel at world-renowned art at the Rijksmuseum and Van Gogh Museum, and explore the vibrant culture of this iconic city.
        </div>
    </div>

    <div class="mySlides fade">
        <div class="numbertext">7 / 7</div>
        <img src="images/miami.jpg" />
        <div class="text">
            Feel the energy of Miami! From pristine beaches to world-class dining and nightlife, Miami offers endless excitement. Plan your tropical getaway today!
        </div>
    </div>
</div>

    <br />

    

    <section class="services-section py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-5 fw-bold">Our Services</h2>
            <div class="row">
                <div class="col-md-4 mb-4">
                    <div class="card h-100 service-card">
                        <div class="card-body text-center">
                            <img src="./images/plane.png" alt="Flight reservation" class="mb-3" height="100" width="100" />
                            <h3 class="card-title">Flight Reservation</h3>
                            <ul class="list-unstyled text-left">
                                <li>
                                    <i class="fas fa-check-circle text-success me-2"></i>Book
                                    domestic and international flights with ease
                                </li>
                                <li>
                                    <i class="fas fa-check-circle text-success me-2"></i>Compare prices and schedules from various
                                    airlines
                                </li>
                                <li>
                                    <i class="fas fa-check-circle text-success me-2"></i>Secure online payment and instant confirmation
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card h-100 service-card">
                        <div class="card-body text-center">
                            <img src="./images/hotel.png" alt="Hotel reservation" class="mb-3" height="100" width="100" />
                            <h3 class="card-title">Hotel Reservation</h3>
                            <ul class="list-unstyled text-left">
                                <li>
                                    <i class="fas fa-check-circle text-success me-2"></i>Choose from a wide range of hotels, apartments,
                                    and
                                    resorts
                                </li>
                                <li>
                                    <i class="fas fa-check-circle text-success me-2"></i>Get
                                    unbeatable rates and exclusive discounts
                                </li>
                                <li>
                                    <i class="fas fa-check-circle text-success me-2"></i>Filter options by location, price, and
                                    amenities
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card h-100 service-card">
                        <div class="card-body text-center">
                            <img src="./images/tour-guide.png" alt="Tour guide" class="mb-3" height="100" width="100" />
                            <h3 class="card-title">Tour Guide</h3>
                            <ul class="list-unstyled text-left">
                                <li>
                                    <i class="fas fa-check-circle text-success me-2"></i>Explore new destinations with expert guides
                                </li>
                                <li>
                                    <i class="fas fa-check-circle text-success me-2"></i>Customized itineraries for individuals and
                                    groups
                                </li>
                                <li>
                                    <i class="fas fa-check-circle text-success me-2"></i>Insider knowledge of local culture, history,
                                    and
                                    attractions
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <h2 class="text-center mb-5 fw-bold">Our Packages Crafted Just For You</h2>
    <!-- Bootstrap Carousel Structure -->
    <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
        <ul class="carousel-indicators"></ul>
        <div class="carousel-inner"></div>
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>

    <section style="color: #000; padding-bottom: 30px">
        <div class="container py-5">
            <div class="row d-flex justify-content-center">
                <div class="col-md-10 col-xl-8 text-center">
                    <h3 class="fw-bold mb-4">Testimonials</h3>
                    <p class="mb-4 pb-2 mb-md-5 pb-md-0">
                        Our clients share their experiences with Travel Experts Agency.
                        Read what they have to say about our exceptional service and
                        unforgettable travel experiences.
                    </p>
                </div>
            </div>

            <div class="row text-center">
                <div class="col-md-4 mb-4 mb-md-0">
                    <div class="card">
                        <div class="card-body py-4 mt-2">
                            <div class="d-flex justify-content-center mb-4">
                                <img src="/images/girl1.jpg" class="rounded-circle shadow-1-strong" width="100" height="100"
                                     alt="Isaac Thomas" />
                            </div>
                        <h5 class="font-weight-bold">Isaac Thomas</h5>
                            <h6 class="font-weight-bold my-3">Honeymooner</h6>
                            <p class="mb-2">
                                <i class="fas fa-quote-left pe-2"></i>Exceptional service!
                                Emily at Travel experts helped me plan an unforgettable
                                honeymoon in Bali. 5/5 stars, Highly Recommended!
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4 mb-md-0">
                    <div class="card">
                        <div class="card-body py-4 mt-2">
                            <div class="d-flex justify-content-center mb-4">
                                <img src="/images/boy1.jpg" class="rounded-circle shadow-1-strong" width="100" height="100"
                                     alt="Sophia Rodriguez" />
                            </div>
                            <h5 class="font-weight-bold">Camella Enrique</h5>
                            <h6 class="font-weight-bold my-3">Luxury Traveler</h6>
                            <p class="mb-2">
                                <i class="fas fa-quote-left pe-2"></i>Travel experts
                                exceeded my expectations! Their team helped me navigate visa
                                requirements and found me a luxury resort in Dubai.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-0">
                    <div class="card">
                        <div class="card-body py-4 mt-2">
                            <div class="d-flex justify-content-center mb-4">
                                <img src="/images/girl2.jpg" class="rounded-circle shadow-1-strong" width="100" height="100"
                                     alt="Rachel Lee" />
                            </div>
                            <h5 class="font-weight-bold">Dwayne Stone</h5>
                            <h6 class="font-weight-bold my-3">Frequent Traveler</h6>
                            <p class="mb-2">
                                <i class="fas fa-quote-left pe-2"></i>They took care of
                                everything from flights to hotel reservations. Highly
                                recommend their tour guide services too! 10/10 would use
                                again.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
@section Scripts {
    <!-- Include the specific Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

    <!-- Include the specific Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
}

<script>
    const carouselInner = document.querySelector(".carousel-inner");
    const carouselIndicators = document.querySelector(".carousel-indicators");

    // Clear any previous items
    carouselInner.innerHTML = "";
    carouselIndicators.innerHTML = "";
    let slideIndex = 0;
    showSlides();

    function showSlides() {
        let i;
        let slides = document.getElementsByClassName("mySlides");
        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
        }
        slideIndex++;
        if (slideIndex > slides.length) { slideIndex = 1 }
        slides[slideIndex - 1].style.display = "block";
        setTimeout(showSlides, 3000); // Change image every 2 seconds
    }
    // Fetch all packages and apply details to the bootstrap
     function fetchAllPackages() {
        // Retrieve packages from ViewBag
        const packages = @Html.Raw(Json.Serialize(ViewBag.Packages));
        console.log(packages);


        // Clear any previous items
        carouselInner.innerHTML = "";
        carouselIndicators.innerHTML = "";

        packages.forEach((pkg, index) => {
            const packageId = pkg.id;
            console.log(pkg);

            // Create indicator item
            const indicator = document.createElement("li");
            indicator.setAttribute("data-bs-target", "#carouselExampleIndicators");
            indicator.setAttribute("data-bs-slide-to", index);
            if (index === 0) {
                indicator.classList.add("active");
            }
            carouselIndicators.appendChild(indicator);

            // Create carousel item
            const carouselItem = document.createElement("div");
            carouselItem.classList.add("carousel-item");
            if (index === 0) {
                carouselItem.classList.add("active");
            }

            // Create the image element
            const img = document.createElement("img");
            img.classList.add("d-block", "w-100");
            img.src = pkg.imagePath;
            img.alt = `${pkg.name} image`;

            // Create caption
            const caption = document.createElement("div");
            caption.classList.add("carousel-caption", "d-none", "d-md-block");
            caption.innerHTML = `
                <h5>${pkg.name}</h5>
                <p style="color: #ffff;">${pkg.description}</p>
                <p style="color: #ffff;">${pkg.startDate.split("T")[0]} to ${pkg.endDate.split("T")[0]}</p>
                <h2>$ ${pkg.totalPrice}</h2>
               
            `;

            // Create button (Bootstrap styled)
            const viewButton = document.createElement("button");
            viewButton.classList.add(
                "btn",
                "btn-primary",
                "position-absolute",
                "bottom-0",
                "end-0",
                "m-3"
            );
            viewButton.textContent = "Book this Package";

            // Add click listener to the button
            viewButton.addEventListener("click", (e) => {
               //navigate to booking page
                const url = `/Booking/Create?packageId=${packageId}`;
                window.location.href = url;
            });

            // Append the button to the caption
            caption.appendChild(viewButton);

            // Append the image and caption to the carousel item
            carouselItem.appendChild(img);
            carouselItem.appendChild(caption);

            // Append the carousel item to the carousel inner
            carouselInner.appendChild(carouselItem);
        });
    }


    fetchAllPackages();

</script>